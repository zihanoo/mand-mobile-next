import{g as e,U as l,h as a,y as t,X as n,o,r as d,Z as s,a as u,i as r,B as i,d as c,F as p,k as f,m,t as y,f as v,j as b}from"./app.49a262c4.js";import{n as x}from"./index.cda9abe6.js";import{c as k}from"./index.a769e3ae.js";var h={modelValue:{type:String,default:""},maxlength:{type:Number,default:4},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},justify:{type:Boolean,default:!1},mask:{type:Boolean,default:!1},system:{type:Boolean,default:!1},okText:{type:String},disorder:{type:Boolean,default:!1},isView:{type:Boolean,default:!1}};function g(e,l=100){if(e){const a=document.createElement("input");a.style.position="absolute",a.style.top=e.offsetTop+7+"px",a.style.left=e.offsetLeft+"px",a.style.height="0px",a.style.opacity="0",a.style.border="none",a.style.outline="none",document.body.appendChild(a),a.focus(),setTimeout((function(){var l,a;null==(l=null==e?void 0:e.focus)||l.call(e),null==(a=null==e?void 0:e.click)||a.call(e)}),l);return()=>{a&&(a.focus(),a.blur(),document.body.removeChild(a))}}}var H=e({name:"MdCodebox",components:{MdNumberKeyboard:x},directives:{clickOutside:k},props:h,emits:[l],setup(e,d){const{code:s,focused:u,focusHandler:r,blurHandler:i,inputHandler:c,nativeInputHandler:p,deleteHandler:f,numberKeyBoardRef:m,box:y,nativeInputRef:v}=((e,{emit:d})=>{const s=a({get:()=>e.modelValue,set:e=>d(l,e)}),u=t(!1),r=()=>{var l;u.value=!0,e.system&&(null==(l=f.value)||l.focus())},i=()=>{u.value=!1},c=t(null),p=a((()=>{var e,l;return null==(l=null==(e=c.value)?void 0:e.$refs.popup)?void 0:l.box})),f=t(null);return n((()=>{s.value.length>=e.maxlength&&i()})),o((()=>{e.autofocus&&r()})),{code:s,focused:u,focusHandler:r,blurHandler:i,inputHandler:l=>{s.value.length<e.maxlength&&(s.value+=`${l}`)},nativeInputHandler:l=>{l.target.value.length<=e.maxlength&&(s.value=l.target.value)},deleteHandler:()=>{s.value=`${s.value}`.slice(0,-1)},numberKeyBoardRef:c,box:p,nativeInputRef:f}})(e,d);return{code:s,focused:u,focusHandler:r,blurHandler:i,inputHandler:c,nativeInputHandler:p,deleteHandler:f,numberKeyBoard:m,box:y,input:v}}}),B={class:"md-codebox-wrapper"},I={key:0,class:"md-codebox-dot"},j={key:1,class:"md-codebox-blink"};H.render=function(e,l){const a=d("md-number-keyboard"),t=s("click-outside");return u(),r("div",B,[i(c("div",{class:["md-codebox",{"is-disabled":e.disabled,"is-justify":e.justify}],onClick:l[2]||(l[2]=(...l)=>e.focusHandler&&e.focusHandler(...l))},[e.maxlength>0?(u(!0),r(p,{key:0},f(e.maxlength,(l=>(u(),r("span",{key:l,class:["md-codebox-box",l===e.code.length+1&&e.focused&&"is-active",e.code[l-1]&&"is-filled"]},[e.code[l-1]?(u(),r(p,{key:0},[e.mask?(u(),r("i",I)):(u(),r(p,{key:1},[m(y(e.code[l-1]),1)],2112))],2112)):v("v-if",!0),l===e.code.length+1&&e.focused?(u(),r("i",j)):v("v-if",!0)],2)))),128)):(u(),r(p,{key:1},[e.mask?(u(),r("input",{key:0,type:"password",maxlength:e.maxlength,value:e.code,readonly:"",disabled:"",class:["md-codebox-holder",e.focused&&"is-active"]},null,10,["maxlength","value"])):(u(),r("input",{key:1,type:"text",maxlength:e.maxlength,value:e.code,readonly:"",disabled:"",class:["md-codebox-holder",e.focused&&"is-active"]},null,10,["maxlength","value"]))],2112)),v(" hidden input "),e.system?(u(),r("input",{key:2,ref:"input",value:e.code,type:e.mask?"password":"text",maxlength:e.maxlength,class:"md-codebox-input",onInput:l[1]||(l[1]=(...l)=>e.nativeInputHandler&&e.nativeInputHandler(...l))},null,40,["value","type","maxlength"])):v("v-if",!0)],2),[[t,e.blurHandler,e.box]]),b(e.$slots,"default"),b(e.$slots,"keyboard",{focused:e.focused,refs:e.numberKeyBoard,inputHandler:e.inputHandler,deleteHandler:e.deleteHandler},(()=>[e.system?v("v-if",!0):(u(),r(a,{key:0,ref:"numberKeyBoard",visible:e.focused,"onUpdate:visible":l[3]||(l[3]=l=>e.focused=l),class:"fake-input-keyboard",type:"simple","ok-text":e.okText,disorder:e.disorder,"is-view":e.isView,onEnter:e.inputHandler,onDelete:e.deleteHandler},null,8,["visible","ok-text","disorder","is-view","onEnter","onDelete"]))]))])};var w=H;w.install=e=>{e.component(w.name,w)};var K=w;export{K as c,g as f};
